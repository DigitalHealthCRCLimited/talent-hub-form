<!DOCTYPE html>
<html>
<head>
    <title>View Saved Submissions</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #111;
            color: #fff;
        }
        .submission {
            background: #222;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #333;
        }
        .field {
            margin: 5px 0;
            padding: 5px;
            background: #333;
            border-radius: 4px;
        }
        .field-name {
            font-weight: bold;
            color: #ff006e;
        }
        h1 { color: #ff006e; }
        .no-data { color: #888; }
        button {
            background: #ff006e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #cc0056; }
    </style>
</head>
<body>
    <h1>Saved Form Submissions</h1>
    <div id="submissions"></div>
    <div id="actions" style="margin-top: 20px;">
        <button onclick="exportToJSON()">Export as JSON</button>
        <button onclick="clearSubmissions()">Clear All Submissions</button>
    </div>

    <script>
        function displaySubmissions() {
            const container = document.getElementById('submissions');
            const submissions = JSON.parse(localStorage.getItem('talentHubSubmissions') || '[]');
            
            if (submissions.length === 0) {
                container.innerHTML = '<p class="no-data">No saved submissions found.</p>';
                return;
            }
            
            container.innerHTML = submissions.map((sub, index) => `
                <div class="submission">
                    <h3>Submission ${index + 1}</h3>
                    <div class="field"><span class="field-name">ID:</span> ${sub.submissionId}</div>
                    <div class="field"><span class="field-name">Submitted:</span> ${new Date(sub.submittedAt).toLocaleString()}</div>
                    <div class="field"><span class="field-name">Status:</span> ${sub.status}</div>
                    <hr>
                    ${Object.entries(sub).filter(([key]) => !['submissionId', 'submittedAt', 'status'].includes(key))
                        .map(([key, value]) => `
                            <div class="field">
                                <span class="field-name">${key}:</span> ${Array.isArray(value) ? value.join(', ') : value}
                            </div>
                        `).join('')}
                </div>
            `).join('');
        }
        
        function exportToJSON() {
            const submissions = localStorage.getItem('talentHubSubmissions') || '[]';
            const blob = new Blob([submissions], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'talentHub-submissions-' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
        }
        
        function clearSubmissions() {
            if (confirm('Are you sure you want to clear all submissions?')) {
                localStorage.removeItem('talentHubSubmissions');
                displaySubmissions();
            }
        }
        
        // Display on load
        displaySubmissions();
    </script>
</body>
</html>